<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Socex</title>
    <link rel="stylesheet" type="text/css" href="/style.css"/>
    <link type="text/css" rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap-theme.min.css"/>
    <link type="text/css" rel="stylesheet" href="/lib/jquery-ui/themes/smoothness/jquery-ui.min.css"/>
    <style>
        [data-id="messages"] {
            overflow-y: scroll;
        }

        #chat > .video {
            text-align: center;
            position: relative;
            min-height: 480px;
        }

        #chat > .video > .buttons {
            left: 200px;
            top: 10px;
        }

        #chat > form {
            width: inherit;
        }

        [data-id="video"] {
            height: 360px;
            background: url("/images/rotary.jpg") no-repeat center;
            background-size: 40%;
        }

        [data-id="localVideo"] {
            left: 0;
            top: 0;
            width: 160px;
            height: 120px;
        }

        video.bigger {
            height: 600px;
        }

        #chat .messages {
            background-color: white;;
        }

        [data-id="messages"] {
            min-height: 6em;
        }

        #chat textarea {
            width: 88%;
        }

        .table-block {
            display: table;
        }

        .table-block > div {
            display: table-row;
        }

        .table-block > div > div {
            display: table-cell;
        }

        .floating {
            position: absolute;
            cursor: move;
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Chrome/Safari/Opera */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE/Edge */
            user-select: none;
        }

        #emoji {
            font-size: 20px;
            background-color: white;
            border: 1px solid black;
            padding: 6px;
        }

        #emoji > div > div {
            line-height: 20px;
            cursor: pointer;
        }

        .fixed {
            position: fixed;
        }

        .absolute {
            position: absolute;
        }

        .relative {
            position: relative;
        }

        .fill {
            width: 100%;
            height: 100%;
        }

        .splitter {
            min-width: 10px;
            min-height: 10px;
            color: grey;
        }

        .splitter[data-fixed="x"] {
            cursor: ns-resize;
            background: #ffffff;
            background: -moz-linear-gradient(top, #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
            background: -webkit-linear-gradient(top, #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
            background: linear-gradient(to bottom, #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6', GradientType=0);
        }

        .splitter[data-fixed="y"] {
            cursor: ew-resize;
            background: #ffffff;
            background: -moz-linear-gradient(left, #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
            background: -webkit-linear-gradient(left, #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
            background: linear-gradient(to right, #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6', GradientType=1);
        }

        .top {
            top: 10px;
        }

        .bottom {
            bottom: 10px;
        }

        .top, .bottom {
            left: 4vw;
            right: 4vw;
            width: 92vw;
            height: calc(50vh - 5px);
        }

        .hide {
            display: none;
        }

        .wrap > .container {
            width: 600px;
        }

        [data-go] {
            color: blue;
            cursor: pointer;
        }

        .root {
            margin: auto;
        }

        .root > * > .content {
            padding-left: 30px;
            width: 600px;
        }
    </style>
</head>
<body>
<div class="table-block root">
    <div>
        <nav style="display: none">
            <div data-go="user/view">Profile</div>
            <div data-go="user/index">Friends</div>
            <div data-go="video/index">Video</div>
        </nav>
        <div class="content">JavaScript is disabled</div>
    </div>
</div>

<div id="lib">
    <form id="user/login">
        <div class="form-group">
            <label>Email</label>
            <input class="form-control" name="email"/>
        </div>
        <div class="form-group">
            <label>Password</label>
            <input class="form-control" name="password" type="password"/>
        </div>
        <p>
            <button data-action="submit" type="button">Login</button>
            <span data-go="user/signup">Signup</span>
        </p>
    </form>

    <form id="user/signup" name="user">
        <div class="form-group">
            <label>Email</label>
            <input class="form-control" name="email" type="email"/>
        </div>
        <div class="form-group">
            <label>Password</label>
            <input class="form-control" name="password" type="password"/>
        </div>
        <div class="form-group">
            <label>Forename</label>
            <input class="form-control" name="forename"/>
        </div>
        <div class="form-group">
            <label>Surname</label>
            <input class="form-control" name="surname"/>
        </div>
        <p>
            <button data-action="fake" type="button">Fake</button>
            <button data-action="submit" type="button">Signup</button>
        </p>
    </form>

    <div id="chat">
        <div class="video relative">
            <div class="buttons">
                <button data-action="call" type="button">Call</button>
                <button data-action="bigger" type="button" class="hide">800x600</button>
            </div>
            <video data-id="localVideo" class="absolute" autoplay muted></video>
            <video data-id="video" controls autoplay></video>
        </div>
        <div class="messages">
            <div data-id="messages">
                <div data-widget="message">
                    <strong data-name="author"></strong>
                    <div data-name="text"></div>
                </div>
            </div>
            <form>
                <textarea data-id="editor" cols="2"></textarea>
                <button data-action="emoji">Emoji</button>
                <button data-action="send">Send</button>
            </form>
        </div>
    </div>

    <div id="user/index">
        <div data-id="users">
            <div data-widget="user">
                <span data-name="forename"></span>
                <span data-name="surname"></span>
                <strong data-name="email"></strong>
            </div>
        </div>
    </div>

    <form id="user/view" data-entity="user">
        <div class="form-group">
            <label>Email</label>
            <input class="form-control" name="email" type="email"/>
        </div>
        <div class="form-group">
            <label>Forename</label>
            <input class="form-control" name="forename"/>
        </div>
        <div class="form-group">
            <label>Surname</label>
            <input class="form-control" name="surname"/>
        </div>
        <p>
            <button data-action="delete" type="button">Delete</button>
        </p>
    </form>

    <form id="video/create" data-entity="media">
        <div class="fields">
            <div class="form-group">
                <label>Title</label>
                <input class="form-control" name="title"/>
            </div>

            <input type="file" name="video" accept="video/*"/>
            <input type="hidden" name="MAX_FILE_SIZE" value="1073741824"/>
            <input type="hidden" name="filename"/>

            <p>
                <button data-action="submit" type="button">Upload</button>
            </p>
        </div>
        <div data-id="progress">
            <span data-id="loaded">0</span> / <span data-id="total">0</span>
            <progress style="display: none"></progress>
        </div>
    </form>

    <div id="video/index">
        <div data-go="video/create">Upload</div>
        <div data-id="videos"></div>
    </div>
</div>

<script src="/lib/jquery/dist/jquery.min.js"></script>
<script src="/lib/jquery-ui/jquery-ui.min.js"></script>
<script src="/lib/webrtc-adapter/adapter.js"></script>
<script src="/util.js"></script>
<script src="/script.js"></script>
<script src="/media.js"></script>
<script src="/lib/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/lib/faker/dist/faker.js"></script>

<div id="emoji" class="table-block" style="display: none">
</div>

<script class="autoremove">
    for (var i = 0; i < 8; i++) {
        var row = document.createElement('div');
        for (var j = 0; j < 9; j++) {
            var char = String.fromCodePoint(0xd83d, 0xde00 + i * 10 + j);
            var cell = document.createElement('div');
            cell.innerHTML = char;
            row.appendChild(cell);
        }
        emoji.appendChild(row);
    }
</script>
<script src="/ui.js"></script>
</body>
</html>
